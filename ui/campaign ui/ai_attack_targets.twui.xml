<?xml version="1.0"?>
<layout
	version="142"
	comment=""
	precache_condition="">
	<hierarchy>
		<root this="F26E903C-EA00-4325-AC881390231B72BE">
			<ai_attack_targets this="492F484A-5337-4475-B6C50882FB3A0317">
				<template_ai_target this="9A0B4BDC-0018-4D62-8A4EF7C8114CC3CB">
					<line_visibility_parent this="30DF3027-A7D9-4A1E-A252DA1E3A0F4C5A">
						<line_target this="7C19C1C7-E8D8-4CDF-B20A049F8A84CF22"/>
					</line_visibility_parent>
					<defend_visibility_parent this="4BCAC755-A0F9-4DDF-9EA786D688516692">
						<icon_defend_target this="61CB4654-A069-4AA5-AA9812F0FBE565D5"/>
					</defend_visibility_parent>
				</template_ai_target>
			</ai_attack_targets>
		</root>
	</hierarchy>
	<components>
		<ai_attack_targets
			this="492F484A-5337-4475-B6C50882FB3A0317"
			id="ai_attack_targets"
			offset="445.00,328.00"
			allowhorizontalresize="false"
			allowverticalresize="false"
			docking="Top Left"
			dock_offset="445.00,328.00"
			tooltipslocalised="true"
			uniqueguid="492F484A-5337-4475-B6C50882FB3A0317"
			currentstate="7556D033-BFD4-4BF1-97B26915C6E29AA9"
			defaultstate="7556D033-BFD4-4BF1-97B26915C6E29AA9"
			comment="Creates a target entry for all military allies, so can see what they are targetting">
			<callbackwithcontextlist>
				<callback_with_context
					callback_id="ContextList"
					context_object_id="CcoStaticObject"
					context_function_id="Try(Join( PlayersFaction.FactionInteractionList.Transform(TargetFactionContext.AIMilitaryTargetList.Transform(First)), GetIf(StoredContext(&quot;CcoCampaignRitual&quot;).LastCompletedRitualRemainingPayloadDuration &gt; 0, StoredContext(&quot;CcoCampaignRitual&quot;).LastCompletedRitualTargetContext.AIMilitaryTargetList.Transform(First))))">
					<child_m_user_properties>
						<property
							name="event0"
							value="CampaignTurnStart"/>
						<property
							name="event1"
							value="FactionDiplomacyChangeAny"/>
						<property
							name="event2"
							value="RitualComplete"/>
						<property
							name="object_store_events"
							value=""/>
					</child_m_user_properties>
				</callback_with_context>
				<callback_with_context
					callback_id="ContextPropagator"
					context_function_id="PlayersFaction.RitualContextForKey(&quot;wh3_main_ritual_tze_cotw_show_ai_intentions&quot;)">
					<child_m_user_properties>
						<property
							name="event0"
							value="CampaignTurnEnd"/>
						<property
							name="event1"
							value="CampaignTurnStart"/>
						<property
							name="event2"
							value="RitualComplete"/>
					</child_m_user_properties>
				</callback_with_context>
				<callback_with_context
					callback_id="ContextObjectStore"
					context_object_id="CcoCampaignRitual"/>
			</callbackwithcontextlist>
			<states>
				<default
					this="7556D033-BFD4-4BF1-97B26915C6E29AA9"
					name="default"
					width="1"
					height="1"
					uniqueguid="7556D033-BFD4-4BF1-97B26915C6E29AA9"/>
			</states>
		</ai_attack_targets>
		<defend_visibility_parent
			this="4BCAC755-A0F9-4DDF-9EA786D688516692"
			id="defend_visibility_parent"
			offset="10.00,10.00"
			uniqueguid="4BCAC755-A0F9-4DDF-9EA786D688516692"
			currentstate="79D91651-1191-4E9D-95B275ACF329E74B"
			defaultstate="79D91651-1191-4E9D-95B275ACF329E74B"
			comment="Show when defending a target and already there (as line makes no sense here)">
			<callbackwithcontextlist>
				<callback_with_context
					callback_id="ContextVisibilitySetter"
					context_object_id="CcoCampaignMilitaryForce"
					context_function_id="AITargetList.IsEmpty == false &amp;&amp; AITargetList.FirstContext.Position== this.Position &amp;&amp; AITargetList.FirstContext.FactionContext == FactionContext"/>
			</callbackwithcontextlist>
			<states>
				<default
					this="79D91651-1191-4E9D-95B275ACF329E74B"
					name="default"
					width="1"
					height="1"
					uniqueguid="79D91651-1191-4E9D-95B275ACF329E74B"/>
			</states>
		</defend_visibility_parent>
		<icon_defend_target
			this="61CB4654-A069-4AA5-AA9812F0FBE565D5"
			id="icon_defend_target"
			offset="-148.00,-108.00"
			allowhorizontalresize="false"
			allowverticalresize="false"
			tooltipslocalised="true"
			componentleveltooltip="{{CcoCampaignMilitaryForce:Name}} is defending {{CcoCampaignMilitaryForce:AITargetList.FirstContext.Name}}"
			tooltiplabel="icon_defend_target_Tooltip_140058"
			uniqueguid="61CB4654-A069-4AA5-AA9812F0FBE565D5"
			currentstate="6702D8AD-3891-4A13-AA7CCB72E4EF0854"
			defaultstate="6702D8AD-3891-4A13-AA7CCB72E4EF0854">
			<callbackwithcontextlist>
				<callback_with_context
					callback_id="ContextWorldSpaceComponent"
					context_object_id="CcoCampaignMilitaryForce"
					context_function_id="AITargetList.FirstContext.Position">
					<child_m_user_properties>
						<property
							name="depth_disabled"
							value="1"/>
					</child_m_user_properties>
				</callback_with_context>
				<callback_with_context
					callback_id="ContextTooltipSetter"
					context_object_id="CcoCampaignMilitaryForce"/>
			</callbackwithcontextlist>
			<componentimages>
				<component_image
					this="09C697E7-91C6-467D-9162BE324017DDDE"
					uniqueguid="09C697E7-91C6-467D-9162BE324017DDDE"
					imagepath="ui/skins/default/panel_title_defender.png"/>
			</componentimages>
			<states>
				<default
					this="6702D8AD-3891-4A13-AA7CCB72E4EF0854"
					name="default"
					width="57"
					height="66"
					interactive="true"
					disabled="true"
					uniqueguid="6702D8AD-3891-4A13-AA7CCB72E4EF0854">
					<imagemetrics>
						<image
							this="1244C591-7396-4FB8-8A6BCE8F7EDF0A53"
							uniqueguid="1244C591-7396-4FB8-8A6BCE8F7EDF0A53"
							componentimage="09C697E7-91C6-467D-9162BE324017DDDE"
							width="57"
							height="66"/>
					</imagemetrics>
				</default>
			</states>
		</icon_defend_target>
		<line_target
			this="7C19C1C7-E8D8-4CDF-B20A049F8A84CF22"
			id="line_target"
			offset="36.00,-102.00"
			tooltipslocalised="true"
			uniqueguid="7C19C1C7-E8D8-4CDF-B20A049F8A84CF22"
			updatewhennotvisible="true"
			currentstate="1043B6BC-2EC3-4546-A0A7AC65FC940491"
			defaultstate="1043B6BC-2EC3-4546-A0A7AC65FC940491">
			<callbackwithcontextlist>
				<callback_with_context
					callback_id="WorldSpaceLineConnectionCallback"
					context_object_id="CcoCampaignMilitaryForce">
					<child_m_user_properties>
						<property
							name="end_y_offset"
							value="0"/>
						<property
							name="ending_point"
							value="AITargetList.FirstContext.Position"/>
						<property
							name="start_y_offset"
							value="0"/>
						<property
							name="starting_point"
							value="Position"/>
						<property
							name="update_constant"
							value=""/>
					</child_m_user_properties>
				</callback_with_context>
				<callback_with_context
					callback_id="ContextStateSetterConditional"
					context_object_id="CcoCampaignMilitaryForce">
					<child_m_user_properties>
						<property
							name="1.war_target"
							value="AITargetList.FirstContext.WarCoordinationTargetterList.Contains(FactionContext)"/>
						<property
							name="2.selected"
							value="FactionContext == DiplomacySelectedFactionContext"/>
						<property
							name="event0"
							value="WarCoordinationStateChanged"/>
						<property
							name="event1"
							value="CampaignNegotiationChange"/>
						<property
							name="fallback_state"
							value="default"/>
						<property
							name="ordered_states"
							value=""/>
					</child_m_user_properties>
				</callback_with_context>
			</callbackwithcontextlist>
			<componentimages>
				<component_image
					this="0AE6DABC-C566-4DBE-A97A86523A3CC37A"
					uniqueguid="0AE6DABC-C566-4DBE-A97A86523A3CC37A"
					imagepath="ui/skins/default/node_link_line_arrow.png"/>
			</componentimages>
			<states>
				<default
					this="1043B6BC-2EC3-4546-A0A7AC65FC940491"
					name="default"
					width="50"
					height="16"
					uniqueguid="1043B6BC-2EC3-4546-A0A7AC65FC940491">
					<imagemetrics>
						<image
							this="FEBC9793-1580-464F-91A0813B70B0690E"
							uniqueguid="FEBC9793-1580-464F-91A0813B70B0690E"
							componentimage="0AE6DABC-C566-4DBE-A97A86523A3CC37A"
							width="50"
							height="16"
							colour="#55AFE664"
							dockpoint="Center"
							canresizeheight="false"
							margin="0.00,16.00,0.00,16.00"
							ui_colour_preset_type_key="alliance_ally"/>
					</imagemetrics>
				</default>
				<selected
					this="D16884D7-6002-4998-A808DBF8A84D2CB4"
					name="selected"
					width="50"
					height="16"
					uniqueguid="D16884D7-6002-4998-A808DBF8A84D2CB4">
					<imagemetrics>
						<image
							this="C270AC5B-FDB3-488D-8C8A951484429D1A"
							uniqueguid="C270AC5B-FDB3-488D-8C8A951484429D1A"
							componentimage="0AE6DABC-C566-4DBE-A97A86523A3CC37A"
							width="50"
							height="16"
							colour="#55AFE6FF"
							dockpoint="Center"
							canresizeheight="false"
							margin="0.00,16.00,0.00,16.00"
							ui_colour_preset_type_key="alliance_ally"/>
					</imagemetrics>
				</selected>
				<war_target
					this="26812D2D-1B56-4713-A4CDEF0702440C93"
					name="war_target"
					width="50"
					height="16"
					shader_name="glow_pulse_t0"
					uniqueguid="26812D2D-1B56-4713-A4CDEF0702440C93">
					<imagemetrics>
						<image
							this="286FD33E-0AD0-4C64-BF3FB0585B0D2BF5"
							uniqueguid="286FD33E-0AD0-4C64-BF3FB0585B0D2BF5"
							componentimage="0AE6DABC-C566-4DBE-A97A86523A3CC37A"
							width="50"
							height="16"
							colour="#55AFE6FF"
							dockpoint="Center"
							canresizeheight="false"
							margin="0.00,16.00,0.00,16.00"
							ui_colour_preset_type_key="alliance_ally"/>
					</imagemetrics>
				</war_target>
			</states>
			<animations>
				<show id="show">
					<frames>
						<frame
							interpolationtime="0"
							interpolationpropertymask="64"
							targetmetrics_m_colour="#FFB90000"
							targetmetrics_m_height="5"
							targetmetrics_m_width="50"/>
						<frame
							interpolationtime="200"
							interpolationpropertymask="64"
							targetmetrics_m_colour="#FFB900C8"
							targetmetrics_m_height="5"
							targetmetrics_m_width="50"/>
					</frames>
				</show>
				<hide id="hide">
					<frames>
						<frame
							interpolationtime="0"
							interpolationpropertymask="64"
							targetmetrics_m_colour="#FFB900C8"
							targetmetrics_m_height="5"
							targetmetrics_m_width="50"/>
						<frame
							interpolationtime="200"
							interpolationpropertymask="64"
							targetmetrics_m_colour="#FFB90000"
							targetmetrics_m_height="5"
							targetmetrics_m_width="50"/>
					</frames>
				</hide>
			</animations>
		</line_target>
		<line_visibility_parent
			this="30DF3027-A7D9-4A1E-A252DA1E3A0F4C5A"
			id="line_visibility_parent"
			tooltipslocalised="true"
			uniqueguid="30DF3027-A7D9-4A1E-A252DA1E3A0F4C5A"
			currentstate="01A5E6BC-BE3E-4805-AC57B982E3363712"
			defaultstate="01A5E6BC-BE3E-4805-AC57B982E3363712"
			comment="Only show line to target if we arent already on it (like defending settlements) ">
			<callbackwithcontextlist>
				<callback_with_context
					callback_id="ContextVisibilitySetter"
					context_object_id="CcoCampaignMilitaryForce"
					context_function_id="IsHiddenToEnemies == false &amp;&amp; IsLayingAmbush == false &amp;&amp; AITargetList.IsEmpty == false &amp;&amp; AITargetList.FirstContext.Position != this.Position"/>
			</callbackwithcontextlist>
			<states>
				<default
					this="01A5E6BC-BE3E-4805-AC57B982E3363712"
					name="default"
					width="1"
					height="1"
					uniqueguid="01A5E6BC-BE3E-4805-AC57B982E3363712"/>
			</states>
		</line_visibility_parent>
		<root
			this="F26E903C-EA00-4325-AC881390231B72BE"
			id="root"
			tooltipslocalised="true"
			uniqueguid="F26E903C-EA00-4325-AC881390231B72BE"
			currentstate="F13CC185-FC60-4751-B7570A7EBDA82A15"
			defaultstate="F13CC185-FC60-4751-B7570A7EBDA82A15">
			<componentimages>
				<component_image
					this="7ADFA736-5B05-4FBC-89121031E6D0F3F2"
					uniqueguid="7ADFA736-5B05-4FBC-89121031E6D0F3F2"/>
			</componentimages>
			<states>
				<default
					this="F13CC185-FC60-4751-B7570A7EBDA82A15"
					name="default"
					width="1600"
					height="900"
					interactive="true"
					uniqueguid="F13CC185-FC60-4751-B7570A7EBDA82A15">
					<imagemetrics>
						<image
							this="83212DEE-3A80-4EFA-88C292B3719BED9B"
							uniqueguid="83212DEE-3A80-4EFA-88C292B3719BED9B"
							componentimage="7ADFA736-5B05-4FBC-89121031E6D0F3F2"
							width="1600"
							height="900"
							colour="#F0F0F0FF"/>
					</imagemetrics>
				</default>
			</states>
		</root>
		<template_ai_target
			this="9A0B4BDC-0018-4D62-8A4EF7C8114CC3CB"
			id="template_ai_target"
			allowhorizontalresize="false"
			allowverticalresize="false"
			tooltipslocalised="true"
			uniqueguid="9A0B4BDC-0018-4D62-8A4EF7C8114CC3CB"
			currentstate="8190B91E-8238-44DA-AD3F23E300140F26"
			defaultstate="8190B91E-8238-44DA-AD3F23E300140F26"
			comment="Only show target info if mousing over character, if selected; or if in war coordination mode where show all. Csaba also wants to show when faction selected in diplomacy now too.">
			<callbackwithcontextlist>
				<callback_with_context
					callback_id="ContextVisibilitySetter"
					context_object_id="CcoCampaignMilitaryForce"
					context_function_id="IsWarCoordinationOpen || IsSelected || FactionContext == DiplomacySelectedFactionContext || CampaignRoot.CursorContext.CharacterContext.MilitaryForceContext == this || (IsCampaignOverlayShowing &amp;&amp; (IsPanelOpen == false || IsPanelOpen(&quot;events&quot;) || IsPanelOpen(&quot;diplomacy_dropdown&quot;)))">
					<child_m_user_properties>
						<property
							name="update_constant"
							value=""/>
					</child_m_user_properties>
				</callback_with_context>
			</callbackwithcontextlist>
			<states>
				<default
					this="8190B91E-8238-44DA-AD3F23E300140F26"
					name="default"
					width="1"
					height="1"
					uniqueguid="8190B91E-8238-44DA-AD3F23E300140F26"/>
			</states>
		</template_ai_target>
	</components>
</layout>
